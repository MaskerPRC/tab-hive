# App.vue 重构功能测试清单

## 测试目标
验证重构后的 `App.vue` 所有功能与重构前完全一致，确保功能幂等性。

## 📋 测试清单

### 1. 布局管理功能 (useLayoutHandlers)

#### 1.1 切换布局
- [ ] 点击侧边栏布局列表，能正常切换到不同布局
- [ ] 切换布局后，网站列表正确更新
- [ ] 全局静音开启时，切换布局后新布局的网站自动静音

#### 1.2 创建布局
- [ ] 点击"新建布局"按钮，能创建新布局
- [ ] 新建布局后自动切换到新布局
- [ ] 新布局名称正确显示

#### 1.3 删除布局
- [ ] 能正常删除非当前布局
- [ ] 删除当前布局后自动切换到第一个布局
- [ ] 只剩一个布局时，删除操作显示警告提示

#### 1.4 重命名布局
- [ ] 右键布局，选择重命名，能正常修改名称
- [ ] 重命名后立即生效并保存

#### 1.5 布局排序
- [ ] 拖拽布局列表项，能重新排序
- [ ] 排序后立即保存

#### 1.6 布局后台运行
- [ ] 切换布局的 Keep Alive 状态
- [ ] 状态切换后显示提示信息

#### 1.7 绘制和画布
- [ ] 在画布上绘制，绘制数据正确保存
- [ ] 画布缩放、平移，变换数据正确保存

#### 1.8 清除配置
- [ ] 点击"清除所有配置"，能重置应用

---

### 2. 网站管理功能 (useWebsiteHandlers)

#### 2.1 添加网站
- [ ] 点击"添加网站"，能打开编辑对话框
- [ ] 输入 URL 和标题，能成功添加网站
- [ ] 添加后网站立即显示在网格中

#### 2.2 复制网站
- [ ] 右键网站卡片，选择"复制"
- [ ] 复制后生成新的网站实例

#### 2.3 删除网站
- [ ] 右键网站卡片，选择"删除"
- [ ] 确认后网站被移除

#### 2.4 更新网站
- [ ] 修改网站 URL、标题等属性
- [ ] 修改后立即保存到布局
- [ ] 刷新页面后修改仍然保留

---

### 3. 应用更新功能 (useUpdateHandlers)

#### 3.1 更新检测
- [ ] 启动应用时自动检测更新
- [ ] 有新版本时显示更新通知

#### 3.2 更新通知
- [ ] 点击侧边栏"检查更新"按钮，显示更新弹窗
- [ ] 更新弹窗显示当前版本和最新版本

#### 3.3 下载更新
- [ ] 点击"立即更新"，开始下载
- [ ] 下载进度正确显示
- [ ] 下载完成后显示"安装"按钮

#### 3.4 取消下载
- [ ] 下载过程中点击"取消"，能中止下载

#### 3.5 重试下载
- [ ] 下载失败后，点击"重试"能重新下载

#### 3.6 忽略更新
- [ ] 点击"忽略此版本"，不再提示该版本更新

#### 3.7 安装更新
- [ ] 点击"安装"，能打开安装程序

---

### 4. 布局分享导出功能 (useLayoutShareExport)

#### 4.1 分享布局（带截图）
- [ ] 右键布局，选择"分享布局"
- [ ] 弹出截图确认对话框
- [ ] 确认后进行截图
- [ ] 截图嵌入布局数据
- [ ] 图片复制到剪贴板或下载
- [ ] 同时上传到服务器

#### 4.2 导出布局（带截图）
- [ ] 右键布局，选择"导出布局"
- [ ] 弹出截图确认对话框
- [ ] 确认后进行截图并下载
- [ ] 取消则导出纯 JSON 文件

#### 4.3 从图片导入布局
- [ ] 粘贴包含布局数据的图片
- [ ] 弹出导入确认对话框
- [ ] 确认后创建新布局
- [ ] 布局数据正确还原

---

### 5. 监听规则功能 (useMonitoringHandlers)

#### 5.1 打开监听规则
- [ ] 右键网站卡片，选择"监听规则"
- [ ] 打开监听规则列表弹窗

#### 5.2 创建监听规则
- [ ] 点击"新建规则"按钮
- [ ] 打开规则编辑对话框
- [ ] 填写规则信息并保存

#### 5.3 编辑监听规则
- [ ] 点击规则列表中的"编辑"按钮
- [ ] 打开规则编辑对话框
- [ ] 修改规则信息并保存

#### 5.4 删除监听规则
- [ ] 点击规则列表中的"删除"按钮
- [ ] 确认后删除规则

#### 5.5 切换规则启用状态
- [ ] 点击规则列表中的开关
- [ ] 规则启用/禁用状态切换

#### 5.6 LLM 配置
- [ ] 在监听规则对话框中点击"API 设置"
- [ ] 打开 LLM 配置对话框
- [ ] 配置 API 信息并保存
- [ ] 配置应用到监听管理器

---

### 6. 应用初始化功能 (useAppInitialization)

#### 6.1 单网站窗口模式
- [ ] 双击网站卡片打开单网站窗口
- [ ] 单网站窗口隐藏侧边栏
- [ ] 单网站窗口自动全屏显示网站

#### 6.2 URL 参数导入
- [ ] 通过 URL 参数传递布局数据
- [ ] 启动时自动导入布局
- [ ] 显示导入成功提示

#### 6.3 侧边栏自动显示
- [ ] 首次启动时侧边栏自动显示
- [ ] 3 秒后自动隐藏
- [ ] 关闭下载弹窗后显示侧边栏

---

### 7. 共享布局功能 (useSharedLayoutHandlers)

#### 7.1 显示共享布局
- [ ] 点击"浏览共享布局"按钮
- [ ] 打开共享布局弹窗
- [ ] 自动加载共享布局列表

#### 7.2 导入共享布局
- [ ] 点击共享布局的"导入"按钮
- [ ] 打开导入模式选择对话框
- [ ] 选择导入模式后成功导入

#### 7.3 搜索共享布局
- [ ] 在搜索框输入关键词
- [ ] 共享布局列表根据关键词过滤

#### 7.4 排序共享布局
- [ ] 点击排序按钮
- [ ] 共享布局列表按指定方式排序

---

### 8. 下载弹窗功能 (useDownloadModalHandlers)

#### 8.1 首次显示
- [ ] 非 Electron 环境首次启动显示下载弹窗
- [ ] 显示下载插件/客户端的提示

#### 8.2 关闭弹窗
- [ ] 点击关闭按钮，弹窗关闭
- [ ] 记录已看过弹窗的标记
- [ ] 首次关闭后显示侧边栏 3 秒

#### 8.3 再次打开
- [ ] 点击侧边栏"下载"按钮
- [ ] 弹窗重新打开

---

### 9. 全局设置功能

#### 9.1 显示标题
- [ ] 切换"显示标题"开关
- [ ] 所有网站标题显示/隐藏

#### 9.2 全局静音
- [ ] 切换"全局静音"开关
- [ ] 所有网站音频静音/取消静音

#### 9.3 广告拦截
- [ ] 切换"广告拦截"开关
- [ ] 广告拦截功能启用/禁用

#### 9.4 自定义代码
- [ ] 切换"自定义代码"开关
- [ ] 自定义代码注入启用/禁用

#### 9.5 证书错误阴影
- [ ] 切换"证书错误阴影"开关
- [ ] 证书错误时显示/隐藏阴影提示

---

### 10. 对话框功能

#### 10.1 Session 管理
- [ ] 点击"Session 管理"按钮
- [ ] 打开 Session 管理对话框

#### 10.2 代理管理
- [ ] 点击"代理管理"按钮
- [ ] 打开代理管理对话框

#### 10.3 内容脚本面板
- [ ] 右键网站卡片，选择"内容脚本"
- [ ] 打开内容脚本面板

#### 10.4 外部链接模态框
- [ ] 点击外部链接
- [ ] 打开外部链接模态框

---

### 11. 视口操作功能

#### 11.1 全屏显示
- [ ] 双击网站卡片
- [ ] 网站全屏显示

#### 11.2 退出全屏
- [ ] 全屏状态下按 ESC 或点击关闭按钮
- [ ] 退出全屏，返回网格视图

#### 11.3 侧边栏切换
- [ ] 点击左上角切换按钮
- [ ] 侧边栏显示/隐藏

---

## 🧪 测试方法

### 手动测试
1. 启动应用
2. 按照清单逐项测试
3. 记录测试结果

### 自动化测试（建议）
1. 使用 Playwright 或 Cypress 编写 E2E 测试
2. 覆盖关键功能路径
3. 集成到 CI/CD 流程

## ✅ 测试结果

- **测试日期**: _________
- **测试人员**: _________
- **通过项数**: _____ / 总计 _____
- **失败项数**: _____
- **备注**: _________

## 🐛 问题记录

| 序号 | 功能点 | 问题描述 | 严重程度 | 状态 |
|------|--------|----------|----------|------|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |

## 📝 结论

- [ ] 所有功能测试通过，重构成功
- [ ] 存在问题，需要修复后重新测试
- [ ] 其他说明：_________

