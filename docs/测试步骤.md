# Electron选择器功能测试步骤

## 1. 确认Electron开发者工具已打开

在`electron/main.js`中应该有这行代码（开发模式下）：
```javascript
mainWindow.webContents.openDevTools()
```

## 2. 测试步骤

### 步骤1：添加网站
1. 启动Electron应用：`npm run electron:dev`
2. 等待应用窗口打开
3. 点击右下角的"+"按钮
4. 填写信息：
   ```
   网站名称：测试网站
   网站地址：https://example.com
   目标选择器：body
   ```
5. 点击"确定"

### 步骤2：查看iframe
1. 等待iframe加载完成
2. 按F12打开开发者工具（如果没有自动打开）
3. 在Console中输入：
   ```javascript
   document.querySelectorAll('iframe')
   ```
4. 应该能看到至少一个iframe元素

### 步骤3：测试全屏
1. 鼠标悬停在网站卡片上
2. 点击"全屏"按钮（⛶图标）
3. **立即查看控制台**，应该看到：
   ```
   [Tab Hive] Electron环境 - 应用选择器: body
   ```

### 步骤4：检查IPC
如果没有看到日志，在Console中手动测试：

```javascript
// 测试1: 检查electron API是否可用
console.log('Electron API:', window.electron)

// 测试2: 检查iframe
const iframe = document.querySelector('iframe[data-iframe-id^="iframe-"]')
console.log('找到iframe:', iframe)

// 测试3: 手动调用IPC
if (window.electron?.executeInIframe) {
  window.electron.executeInIframe('iframe-test', `
    (function() {
      console.log('手动IPC测试成功！');
      return { success: true };
    })()
  `).then(result => {
    console.log('IPC结果:', result)
  })
}
```

## 3. 常见问题

### 问题1：没有看到任何日志
**原因：** 
- 可能没有配置选择器
- 或者全屏功能没有触发

**解决：**
- 确认在添加网站时填写了"目标选择器"字段
- 检查网站卡片上是否有全屏按钮

### 问题2：看到"Iframe not found"错误
**原因：** iframe还没有加载完成

**解决：**
- 等待几秒后再点击全屏
- 或者增加延迟时间

### 问题3：看到跨域错误
**原因：** iframe内容受到同源策略限制

**解决：**
- 这是预期的，Electron已经禁用了CORS
- 但某些网站可能仍然有限制

## 4. 调试命令

在开发者工具Console中运行：

```javascript
// 显示所有iframe
console.log('所有iframe:', document.querySelectorAll('iframe'))

// 显示第一个iframe的ID
const firstIframe = document.querySelector('iframe')
if (firstIframe) {
  console.log('iframe ID:', firstIframe.getAttribute('data-iframe-id'))
  console.log('iframe src:', firstIframe.src)
}

// 检查是否在Electron环境
console.log('是否Electron:', window.electron?.isElectron)
```

