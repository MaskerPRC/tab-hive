# 全屏元素选择器功能

## 功能概述

在全屏状态下，用户可以通过可视化方式选择页面中的特定元素作为选择器配置。这个功能允许用户精确定位iframe中的某个元素，并在非全屏模式下只显示该元素。

## 功能特性

- ✅ **全屏模式下的元素选择** - 在网站全屏状态下启用
- ✅ **鼠标悬停显示** - 顶部工具栏会在鼠标移入时显示
- ✅ **可视化高亮** - 鼠标悬停的元素会被实时高亮
- ✅ **自动生成选择器** - 使用开源库 `css-selector-generator` 自动生成最优CSS选择器
- ✅ **实时预览** - 工具栏显示当前选中元素的CSS选择器
- ✅ **ESC键取消** - 按ESC键可随时取消选择

## 使用方法

### 步骤 1: 添加网站并进入全屏

1. 点击浮动的 "+" 按钮添加一个网站
2. 输入网站URL和标题
3. 点击网站卡片右上角的全屏按钮进入全屏模式

### 步骤 2: 启动元素选择器

1. 在全屏模式下，将鼠标移到页面**顶部中间区域**
2. 会出现一个工具栏，包含两个按钮：
   - **选择元素** 按钮（左侧，指针图标）
   - **退出全屏** 按钮（右侧）
3. 点击 **"选择元素"** 按钮

### 步骤 3: 选择目标元素

1. 点击后，页面会进入元素选择模式
2. 移动鼠标到iframe中的任意元素上
3. 被鼠标悬停的元素会用**橙色边框高亮显示**
4. 顶部工具栏会显示当前元素的CSS选择器
5. 点击想要选择的元素确认选择
6. 系统会弹出提示框显示已设置的选择器

### 步骤 4: 应用选择器

1. 退出全屏模式
2. 在网格视图中，该网站卡片会**自动只显示选中的元素**
3. 选中的元素会被放大到占满整个卡片区域

## 技术实现

### 核心组件

1. **ElementSelector.vue** - 元素选择器主组件
   - 自动检测运行环境（浏览器 vs Electron）
   - 浏览器环境：通过postMessage与Chrome扩展通信
   - Electron环境：使用window.electron.executeInIframe API
   - 显示当前悬停元素的选择器

2. **FullscreenBar.vue** - 全屏工具栏
   - 添加了"选择元素"按钮
   - 触发元素选择模式

3. **GridView.vue** - 网格视图容器
   - 集成元素选择器
   - 处理选择结果并更新网站配置

4. **Chrome Extension (content.js)** - Chrome扩展内容脚本
   - 在iframe内部创建选择器UI
   - 处理鼠标事件和元素高亮
   - 生成CSS选择器
   - 通过postMessage与父页面通信

### 环境支持

#### 浏览器环境
- **需要Chrome扩展** - 位于 `chrome-extension` 文件夹
- 通过postMessage跨域通信
- 扩展在iframe内部创建选择器UI
- 支持跨域iframe

#### Electron环境
- 使用Electron的IPC机制
- 通过executeInIframe注入脚本
- 轮询检测选择状态
- 无需额外扩展

## 选择器生成策略

系统使用以下优先级生成CSS选择器：

1. **ID选择器** - 如 `#main-content`
2. **Class选择器** - 如 `.video-player`
3. **标签选择器** - 如 `div > video`
4. **属性选择器** - 如 `[data-player-id="123"]`

系统会自动选择最简洁且唯一的选择器。

## 使用场景

### 场景 1: 只显示视频播放器

在视频网站中，你可能只想显示视频播放器部分：
1. 全屏打开视频网站
2. 点击"选择元素"
3. 选择视频播放器元素
4. 退出全屏，只有播放器会显示在网格中

### 场景 2: 显示实时数据面板

在数据监控网站中，只显示关键指标面板：
1. 全屏打开监控网站
2. 选择数据面板元素
3. 在网格视图中只显示该面板

### 场景 3: 聚焦特定内容区域

在新闻或博客网站中，只显示文章内容区域：
1. 全屏打开网站
2. 选择文章内容区域
3. 隐藏导航、侧边栏等干扰元素

## 快捷键

- **ESC** - 取消元素选择模式

## 注意事项

1. **只在全屏模式下可用** - 元素选择器只能在网站全屏状态下使用
2. **跨域限制** - 对于跨域iframe，可能需要Chrome扩展支持
3. **选择器持久化** - 选择的元素选择器会自动保存到网站配置中
4. **动态内容** - 如果页面结构变化，可能需要重新选择元素

## 视觉设计

### 高亮效果
- 橙色边框（2px solid #ff5c00）
- 半透明背景（rgba(255, 92, 0, 0.1)）
- 虚线动画外框

### 工具栏
- 橙色背景（rgba(255, 92, 0, 0.95)）
- 圆角设计（12px）
- 毛玻璃效果（backdrop-filter）
- 滑入动画

### 覆盖层
- 半透明黑色背景（rgba(0, 0, 0, 0.1)）
- 十字光标（crosshair）

## 下一步增强

- [ ] 支持多元素选择
- [ ] 选择器编辑器
- [ ] 选择历史记录
- [ ] 选择器预览模式
- [ ] XPath选择器支持

## 反馈与问题

如有问题或建议，请提交Issue或Pull Request。

